{% extends "base.html" %}

{% block head %}
<title>{{ video.title }}</title>
<link rel="stylesheet" href="{{ url_for('static', filename='styles/video_page.css') }}">
<script defer src="{{ url_for('static', filename='scripts/read_more.js') }}"></script>
<script defer src="{{ url_for('static', filename='scripts/video_player.js') }}"></script>
{% endblock %}

{% block content %}
{% include "top_bar_template.html" %}
<div class="container">
    <iframe src="https://www.youtube-nocookie.com/embed/{{ video.video_id }}?si=0WWbkz0vjzds1ffl" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
    <h1>{{ video.title }}</h1>
    <div class="info">
        <p><a href="{{ url_for('main.channel_overview', channel_id=video.channel_id) }}">{{ video.channel_name }}</a></p>
        <p>{{ video.views }} views</p>
    </div>
    <p class="description read-more">{{ video.description }}</p>

    <div class="comments-section">
        {% for comment in comments %}
            <div class="comment-box">
                <div class="comment" id="comment-{{ comment.id }}">
                    <p>author: {{ comment.author }}</p>
                    <p>author id: {{ comment.author_id }}</p>
                    <p>time upload: {{ comment.time_str }}</p>
                    <img src="{{ comment.author_thumbnail_url }}">
                    <p>content: {{ comment.text }}</p>
                    <p>likes: {{ comment.like_count }}</p>
                </div>

                {% for reply in comment.replies %}
                    <div class="reply" id="comment-{{ reply.id }}">
                        <p>This is a reply to the above comment</p>
                        <p>author: {{ reply.author }}</p>
                        <p>author id: {{ reply.author_id }}</p>
                        <p>time upload: {{ reply.time_str }}</p>
                        <img src="{{ reply.author_thumbnail_url }}">
                        <p>content: {{ reply.text }}</p>
                        <p>likes: {{ reply.like_count }}</p>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
